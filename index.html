<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Smart Notes - HTML ŸÜÿ≥ÿÆÿ© ŸÖÿπ ÿ≤ŸàŸÖ</title>
  <style>
    :root{
      --bg:#f8fafc; --muted:#64748b; --panel:#ffffffcc;
    }
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial; background:var(--bg);}
    .app{position:relative;height:100vh;overflow:hidden}
    .grid-bg{position:absolute;inset:0;background-image:radial-gradient(#cbd5e1 2px, transparent 2px);background-size:40px 40px;cursor:grab}
    .controls{position:fixed;top:12px;right:12px;display:flex;flex-direction:column;gap:8px;z-index:60}
    .ctrl-btn{background:white;padding:10px;border-radius:10px;box-shadow:0 6px 18px rgba(15,23,42,0.08);border:none;cursor:pointer}
    .center-add{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:45}
    .add-btn{width:88px;height:88px;border-radius:28px;background:#111827;color:white;border:none;display:flex;align-items:center;justify-content:center;font-size:28px;box-shadow:0 20px 40px rgba(2,6,23,0.3);cursor:pointer}
    .canvas-layer{position:absolute;inset:0;transform-origin:0 0;pointer-events:none}
    .notes-root{position:absolute;left:50%;top:50%;pointer-events:auto}
    .note{
      position:absolute;width:200px;height:200px;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;
      border-radius:40% 60% 70% 30%/40% 50% 60% 50%;box-shadow:0 12px 30px rgba(2,6,23,0.08);overflow:hidden;cursor:grab;
      user-select:none; touch-action:none;
    }
    .note .title{font-weight:800;padding:6px 8px;line-height:1.1}
    .note .text{font-size:13px;color:#444;padding:0 8px;opacity:.85}
    .note .media{margin-top:8px}
    .delete-x{position:absolute;left:8px;top:8px;background:white;border-radius:9px;padding:6px;cursor:pointer;opacity:.95}
    .cat-personal{background:#ffcfd2;color:#5c3a3c}
    .cat-work{background:#daeaf6;color:#3b4d61}
    .cat-ideas{background:#fff4bd;color:#6b5d3a}
    .cat-urgent{background:#e2f0cb;color:#4a5e3a}
    .cat-script{background:#e0e7ff;color:#3730a3}
    .sidebar{position:fixed;top:0;right:0;height:100%;width:320px;background:var(--panel);backdrop-filter:blur(6px);box-shadow:-30px 0 70px rgba(2,6,23,0.06);padding:20px;transform:translateX(100%);transition:transform .28s;z-index:80}
    .sidebar.open{transform:translateX(0)}
    .status-bar{position:fixed;left:50%;top:14px;transform:translateX(-50%);background:#2563eb;color:white;padding:8px 14px;border-radius:999px;z-index:90;display:none}
    .status-bar.show{display:block}
    .modal-back{position:fixed;inset:0;background:rgba(255,255,255,0.7);backdrop-filter:blur(6px);display:flex;align-items:center;justify-content:center;z-index:100}
  </style>
</head>
<body>
<div class="app" id="app">
<div class="grid-bg" id="bg"></div>

<div class="controls">
  <button class="ctrl-btn" id="menuBtn">‚ò∞</button>
  <button class="ctrl-btn" id="resetView">üéØ</button>
  <button class="ctrl-btn" id="connectToggle">üîó</button>
  <button class="ctrl-btn" id="exportBtn">üì§</button>
  <button class="ctrl-btn" id="zoomIn">Ôºã</button>
  <button class="ctrl-btn" id="zoomOut">Ôºç</button>
</div>

<div class="status-bar" id="status">ÿßÿ∂ÿ∫ÿ∑ ÿπŸÑŸâ ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿ© ÿßŸÑÿ£ŸàŸÑŸâ</div>

<div class="center-add">
  <button class="add-btn" id="openAdd">Ôºã</button>
</div>

<svg id="svgLayer" style="position:absolute;inset:0;z-index:30;pointer-events:none"></svg>

<div class="canvas-layer" id="canvasLayer" style="transform:translate(0px,0px) scale(1)">
  <div class="notes-root" id="notesRoot"></div>
</div>

<aside class="sidebar" id="sidebar"></aside>

<div id="modalWrap" style="display:none"></div>
</div>

<script>
let viewOffset={x:0,y:0}, scale=1;
const canvasLayer=document.getElementById("canvasLayer");
const svgLayer=document.getElementById("svgLayer");

function applyTransform(){
  canvasLayer.style.transform = \`translate(\${viewOffset.x}px, \${viewOffset.y}px) scale(\${scale})\`;
}

document.getElementById("zoomIn").addEventListener("click", ()=>{
  scale += 0.1; if(scale>2) scale=2;
  applyTransform();
});
document.getElementById("zoomOut").addEventListener("click", ()=>{
  scale -= 0.1; if(scale<0.3) scale=0.3;
  applyTransform();
});

window.addEventListener("wheel",(e)=>{
  const delta=e.deltaY>0?-0.05:+0.05;
  scale+=delta;
  if(scale<0.3) scale=0.3;
  if(scale>2) scale=2;
  applyTransform();
},{passive:true});
</script>

</body>
</html>
